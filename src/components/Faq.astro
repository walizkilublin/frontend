---
// Zero Svelte, czysty i piekielnie szybki HTML wygenerowany na serwerze!
const faqs = [
  {
    q: "Czy sprzedajecie walizki na pojedyncze sztuki?",
    a: "Tak! Mimo że jesteśmy hurtownią, prowadzimy również sprzedaż detaliczną dla klientów indywidualnych."
  },
  {
    q: "Jak mogę złożyć zamówienie?",
    a: "Najbardziej cenimy kontakt bezpośredni. Wystarczy do nas zadzwonić. Możesz również użyć formularza kontaktowego na dole strony."
  },
  {
    q: "Prowadzę sklep. Czy dostanę zniżkę hurtową?",
    a: "Oczywiście. Od lat zaopatrujemy stoiska i sklepy galanteryjne. Zadzwoń do nas, a przygotujemy dla Ciebie indywidualny cennik i rabaty przy większych zamówieniach."
  },
  {
    q: "Jak wysyłacie towar?",
    a: "Korzystamy ze sprawdzonych firm kurierskich. Wysyłamy zarówno pojedyncze paczki (detal), jak i całe palety (hurt) na terenie całej Polski."
  }
];
---

<section id="faq" class="relative w-full bg-ghost-white py-24 z-20 wl-faq-section">
  <div class="max-w-[1920px] mx-auto px-4 md:px-8 flex flex-col lg:flex-row gap-16">
    
    <div class="w-full lg:w-1/3">
      <div class="sticky top-24">
        <div class="flex items-center gap-4 mb-4">
          <span class="w-3 h-3 bg-vantablack"></span>
          <span class="text-xs font-mono font-bold tracking-widest text-cool-grey uppercase">Warto wiedzieć</span>
        </div>
        <h2 class="text-4xl md:text-5xl font-black uppercase tracking-tighter text-vantablack leading-none mb-6">
          Najczęstsze <br/><span class="text-cool-grey">Pytania (FAQ)</span>
        </h2>
        <p class="text-sm font-medium text-cool-grey leading-relaxed mb-8 border-l-2 border-border-tech pl-4">
          Optymalizujemy czas naszych partnerów. Zanim nawiążesz połączenie z centralą, sprawdź protokoły operacyjne i zasady współpracy hurtowej.
        </p>
        <a 
          href="#kontakt" 
          class="inline-flex items-center gap-3 bg-white border border-border-tech text-vantablack font-bold uppercase tracking-widest text-[10px] px-6 py-4 hover:border-vantablack transition-colors"
        >
          <span>Przejdź do formularza</span>
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="square" stroke-linejoin="miter" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
        </a>
      </div>
    </div>

    <div class="w-full lg:w-2/3 flex flex-col border-t border-border-tech">
      {faqs.map((faq, index) => (
        <div class="border-b border-border-tech bg-white">
          <button 
            type="button"
            class="faq-button w-full text-left py-6 px-4 md:px-8 flex justify-between items-center hover:bg-surface/50 transition-colors focus:outline-none group"
            aria-expanded={index === 0 ? "true" : "false"}
            data-index={index}
          >
            <span class="text-sm md:text-base font-bold uppercase tracking-widest text-vantablack group-hover:text-signal-orange transition-colors pr-8">
              <span class="text-[10px] font-mono text-cool-grey mr-4">0{index + 1}</span>
              {faq.q}
            </span>
            
            <div class="relative w-6 h-6 shrink-0 flex items-center justify-center">
              <div class={`faq-icon-h absolute w-full h-[2px] transition-all duration-300 ${index === 0 ? 'bg-signal-orange rotate-180' : 'bg-vantablack'}`}></div>
              <div class={`faq-icon-v absolute h-full w-[2px] transition-all duration-300 ${index === 0 ? 'bg-signal-orange rotate-90 scale-0' : 'bg-vantablack rotate-0 scale-100'}`}></div>
            </div>
          </button>

          <div class={`faq-content grid transition-all duration-[400ms] ease-out ${index === 0 ? 'grid-rows-[1fr]' : 'grid-rows-[0fr]'}`}>
            <div class="overflow-hidden">
              <div class="px-4 md:px-8 pb-8 pt-2 pl-[4.5rem]">
                <p class="text-sm text-cool-grey font-medium leading-relaxed">
                  {faq.a}
                </p>
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>

  </div>
</section>

{/* Piekielnie szybki skrypt Vanilla JS wykonujący się bez obciążania procesora */}
<script is:inline>
  document.addEventListener('astro:page-load', () => {
    const faqSections = document.querySelectorAll('.wl-faq-section');
    
    faqSections.forEach(section => {
      const buttons = section.querySelectorAll('.faq-button');
      const contents = section.querySelectorAll('.faq-content');
      const iconsH = section.querySelectorAll('.faq-icon-h');
      const iconsV = section.querySelectorAll('.faq-icon-v');

      buttons.forEach((btn, index) => {
        btn.addEventListener('click', () => {
          const isExpanded = btn.getAttribute('aria-expanded') === 'true';

          // 1. Zamykamy wszystkie panele
          buttons.forEach((b, i) => {
            b.setAttribute('aria-expanded', 'false');
            
            iconsH[i].classList.remove('bg-signal-orange', 'rotate-180');
            iconsH[i].classList.add('bg-vantablack');
            
            iconsV[i].classList.remove('bg-signal-orange', 'rotate-90', 'scale-0');
            iconsV[i].classList.add('bg-vantablack', 'rotate-0', 'scale-100');
            
            contents[i].classList.remove('grid-rows-[1fr]');
            contents[i].classList.add('grid-rows-[0fr]');
          });

          // 2. Jeśli kliknięty panel był zamknięty, otwieramy go
          if (!isExpanded) {
            btn.setAttribute('aria-expanded', 'true');
            
            iconsH[index].classList.add('bg-signal-orange', 'rotate-180');
            iconsH[index].classList.remove('bg-vantablack');
            
            iconsV[index].classList.add('bg-signal-orange', 'rotate-90', 'scale-0');
            iconsV[index].classList.remove('bg-vantablack', 'rotate-0', 'scale-100');
            
            contents[index].classList.remove('grid-rows-[0fr]');
            contents[index].classList.add('grid-rows-[1fr]');
          }
        });
      });
    });
  });
</script>